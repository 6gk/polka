#!/bin/sh
#  preview hex

[ "$(pgrep -x hex)" = "$$" ] || exit

# if the selection is a hex value of the correct length,
# use that, otherwise select a pixel
hex=$(xclip -o | tr -d "#:;,.='()\" ")

v='[a-fA-F0-9]'
case $hex in
	$v$v$v$v$v$v) ;;
	*) hex="$(colorpicker -doq)"
esac

hex=$(printf %s "$hex" | tr '[:upper:]' '[:lower:]' | tr -d '#\n')

# copy the hex, then clear selection
printf %s "$hex" | xclip -sel clip
xclip -i /dev/null

# send notification with the hex value and preview
notify-send "$hex" "<span background='#$hex'>      </span>"
